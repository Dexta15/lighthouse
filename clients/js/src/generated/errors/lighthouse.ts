/**
 * This code was AUTOGENERATED using the kinobi library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun kinobi to update it.
 *
 * @see https://github.com/metaplex-foundation/kinobi
 */

export const enum LighthouseProgramErrorCode {
  /** InvalidInstructionData: Invalid instruction */
  INVALID_INSTRUCTION_DATA = 0x1770, // 6000
  /** Unimplemented: Invalid market parameters error */
  UNIMPLEMENTED = 0x1771, // 6001
  /** AssertionFailed: AssertionFailed */
  ASSERTION_FAILED = 0x1772, // 6002
  /** NotEnoughAccounts: NotEnoughAccounts */
  NOT_ENOUGH_ACCOUNTS = 0x1773, // 6003
  /** DataValueMismatch: DataValueMismatch */
  DATA_VALUE_MISMATCH = 0x1774, // 6004
  /** UnsupportedOperator: UnsupportedOperator */
  UNSUPPORTED_OPERATOR = 0x1775, // 6005
  /** OutOfRange: OutOfRange */
  OUT_OF_RANGE = 0x1776, // 6006
  /** AccountBorrowFailed: AccountBorrowFailed */
  ACCOUNT_BORROW_FAILED = 0x1777, // 6007
  /** AccountOwnerMismatch: AccountNotTokenAccount */
  ACCOUNT_OWNER_MISMATCH = 0x1778, // 6008
  /** AccountNotInitialized: AccountNotInitialized */
  ACCOUNT_NOT_INITIALIZED = 0x1779, // 6009
  /** UnauthorizedIxEntry: UnauthorizedIxEntry */
  UNAUTHORIZED_IX_ENTRY = 0x177a, // 6010
  /** InvalidDataLength: InvalidDataLength */
  INVALID_DATA_LENGTH = 0x177b, // 6011
  /** FailedToDeserialize: FailedToDeserialize */
  FAILED_TO_DESERIALIZE = 0x177c, // 6012
  /** AccountOwnerValidationFailed: AccountOwnerValidationFailed */
  ACCOUNT_OWNER_VALIDATION_FAILED = 0x177d, // 6013
  /** AccountFundedValidationFailed: AccountFundedValidationFailed */
  ACCOUNT_FUNDED_VALIDATION_FAILED = 0x177e, // 6014
  /** AccountDiscriminatorValidationFailed: AccountDiscriminatorValidationFailed */
  ACCOUNT_DISCRIMINATOR_VALIDATION_FAILED = 0x177f, // 6015
  /** AccountValidaitonFailed: AccountValidaitonFailed */
  ACCOUNT_VALIDAITON_FAILED = 0x1780, // 6016
  /** InvalidProgramAddress: InvalidProgramAddress */
  INVALID_PROGRAM_ADDRESS = 0x1781, // 6017
  /** SerializationFailed: SerializationFailed */
  SERIALIZATION_FAILED = 0x1782, // 6018
}

export class LighthouseProgramError extends Error {
  override readonly name = 'LighthouseProgramError';

  readonly code: LighthouseProgramErrorCode;

  readonly cause: Error | undefined;

  constructor(
    code: LighthouseProgramErrorCode,
    name: string,
    message: string,
    cause?: Error
  ) {
    super(`${name} (${code}): ${message}`);
    this.code = code;
    this.cause = cause;
  }
}

let lighthouseProgramErrorCodeMap:
  | Record<LighthouseProgramErrorCode, [string, string]>
  | undefined;
if (__DEV__) {
  lighthouseProgramErrorCodeMap = {
    [LighthouseProgramErrorCode.INVALID_INSTRUCTION_DATA]: [
      'InvalidInstructionData',
      `Invalid instruction`,
    ],
    [LighthouseProgramErrorCode.UNIMPLEMENTED]: [
      'Unimplemented',
      `Invalid market parameters error`,
    ],
    [LighthouseProgramErrorCode.ASSERTION_FAILED]: [
      'AssertionFailed',
      `AssertionFailed`,
    ],
    [LighthouseProgramErrorCode.NOT_ENOUGH_ACCOUNTS]: [
      'NotEnoughAccounts',
      `NotEnoughAccounts`,
    ],
    [LighthouseProgramErrorCode.DATA_VALUE_MISMATCH]: [
      'DataValueMismatch',
      `DataValueMismatch`,
    ],
    [LighthouseProgramErrorCode.UNSUPPORTED_OPERATOR]: [
      'UnsupportedOperator',
      `UnsupportedOperator`,
    ],
    [LighthouseProgramErrorCode.OUT_OF_RANGE]: ['OutOfRange', `OutOfRange`],
    [LighthouseProgramErrorCode.ACCOUNT_BORROW_FAILED]: [
      'AccountBorrowFailed',
      `AccountBorrowFailed`,
    ],
    [LighthouseProgramErrorCode.ACCOUNT_OWNER_MISMATCH]: [
      'AccountOwnerMismatch',
      `AccountNotTokenAccount`,
    ],
    [LighthouseProgramErrorCode.ACCOUNT_NOT_INITIALIZED]: [
      'AccountNotInitialized',
      `AccountNotInitialized`,
    ],
    [LighthouseProgramErrorCode.UNAUTHORIZED_IX_ENTRY]: [
      'UnauthorizedIxEntry',
      `UnauthorizedIxEntry`,
    ],
    [LighthouseProgramErrorCode.INVALID_DATA_LENGTH]: [
      'InvalidDataLength',
      `InvalidDataLength`,
    ],
    [LighthouseProgramErrorCode.FAILED_TO_DESERIALIZE]: [
      'FailedToDeserialize',
      `FailedToDeserialize`,
    ],
    [LighthouseProgramErrorCode.ACCOUNT_OWNER_VALIDATION_FAILED]: [
      'AccountOwnerValidationFailed',
      `AccountOwnerValidationFailed`,
    ],
    [LighthouseProgramErrorCode.ACCOUNT_FUNDED_VALIDATION_FAILED]: [
      'AccountFundedValidationFailed',
      `AccountFundedValidationFailed`,
    ],
    [LighthouseProgramErrorCode.ACCOUNT_DISCRIMINATOR_VALIDATION_FAILED]: [
      'AccountDiscriminatorValidationFailed',
      `AccountDiscriminatorValidationFailed`,
    ],
    [LighthouseProgramErrorCode.ACCOUNT_VALIDAITON_FAILED]: [
      'AccountValidaitonFailed',
      `AccountValidaitonFailed`,
    ],
    [LighthouseProgramErrorCode.INVALID_PROGRAM_ADDRESS]: [
      'InvalidProgramAddress',
      `InvalidProgramAddress`,
    ],
    [LighthouseProgramErrorCode.SERIALIZATION_FAILED]: [
      'SerializationFailed',
      `SerializationFailed`,
    ],
  };
}

export function getLighthouseProgramErrorFromCode(
  code: LighthouseProgramErrorCode,
  cause?: Error
): LighthouseProgramError {
  if (__DEV__) {
    return new LighthouseProgramError(
      code,
      ...(
        lighthouseProgramErrorCodeMap as Record<
          LighthouseProgramErrorCode,
          [string, string]
        >
      )[code],
      cause
    );
  }

  return new LighthouseProgramError(
    code,
    'Unknown',
    'Error message not available in production bundles. Compile with __DEV__ set to true to see more information.',
    cause
  );
}
